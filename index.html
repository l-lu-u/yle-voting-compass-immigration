<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/normalize.css"/>
    <link rel="stylesheet" href="./css/style.css?"/>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3-random@3"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3-force@3"></script>
    <title>What we talk about when we talk about immigration?</title>
</head>
<body>
    <div class="card _intro">
        <h1>What we talk about when we talk about immigration?</h1>
        <h2>Finnish election candidates and parties' views on immigration (in voting machine)</h2>
        <p>Source: Yle Uutisten vaalikonedatat (Yle Voting Machine Open Data) </p>
        <select id="selectButton"></select>
    </div>
    <div id="candidate_plot"></div>

    <script>
        var title = "Anonymous Candidates' Answers on Immigration (2023)";
        var units = "candiate count";

        //set the dimensions and margins of the graph
        const margin = {top:80, right:30, bottom:30, left:30},
            width = 800 - margin.left - margin.right,
            height = 750 - margin.top - margin.bottom;
        const padding = 1.15;
        //set the radius of the circles
        const circleRadius = 5; 

        // statement list
        const statements = [
            "Finland should accept fewer quota refugees from refugee camps.",
            "Labour immigration is needed to sustain the Finnish welfare society.",
            "Businesses must have the freedom to hire workers from outside the EU without an availability test.",
            "Finland must be able to deport immigrants who commit crimes more easily than at present."
        ]
        console.table(statements);

        // add statement to the dropdown menu selection
        d3.select("#selectButton")
            .selectAll("myOptions")
                .data(statements)
            .enter()
                .append("option")
            .text(function (d) { return d; }) 
            .attr("value", function (d) { return d; }) 

        var svg = d3.select("#candidate_plot")
            .append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
            .append("g")
                .attr("transform", "translate("+margin.left+","+margin.top+")");

        d3.json("./data/candidate-answers-2023.json").then(function(data){
            // console.table(data);

            // list of parties
            // var parties = [];
            // data.forEach(element => {
            //     var e = {
            //         party: element.party
            //     }
            //     parties.push(e.party);
            // });

            var countCandidates = d3.selectAll(data).size();
            console.log(countCandidates);

            var candidatesByParty = d3.group(data, d=>d.party);
            console.log(candidatesByParty);


        })


    </script>
</body>
</html>